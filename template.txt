<!-- TEMPLATE: KPFK Show Page v1.0 | Ultra-clean with head CSS/JS -->
<!-- === SHOW HEADER BLOCK === -->
<div class="show-header" style="display: flex; flex-wrap: wrap; align-items: center; gap: 30px; padding: 20px 0;">
  <div class="show-logo-container" style="flex: 0 0 280px;">
    <!-- üîß EDIT: Update logo image src and alt text for each show -->
    <img alt="Show logo placeholder" class="show-logo" src="https://placehold.co/280x280/e3f2fd/1565c0?text=SHOW+LOGO" style="width: 100%; height: 280px; object-fit: cover; object-position: center; border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.15);" />
  </div>
  <style type="text/css">
  /* === DO NOT EDIT THIS CSS SECTION === */
  /* Hide redundant AIIR header */
  .o-headline {
      display: none !important;
  }


  #episodes::before {
      content: "";
      display: block;
      height: 100px; /* how much higher you want the scroll to stop */
      margin-top: -100px; /* negative value to pull content up */
      visibility: hidden;
  }


  /* Updated typography and button styling */
  .show-title, h2, h3 {
    font-family: 'League Spartan', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    font-weight: 700;
    letter-spacing: 0.5px;
  }


  /* Consistent button styling */
  .cta-button, .contact-button {
      display: inline-block;
      padding: 14px 28px;
      border-radius: 8px;
      text-decoration: none;
      font-family: 'League Spartan', 'Helvetica Neue', Helvetica, Arial, sans-serif;
      font-weight: 700;
      font-size: 18px;
      letter-spacing: 0.5px;
      transition: transform 0.2s, box-shadow 0.2s;
      border: none;
      cursor: pointer;
  }
  
  .cta-button {
      background: linear-gradient(90deg, #D9111B, #F41542);
      color: #ffffff !important;
      box-shadow: 0 4px 15px rgba(229, 9, 20, 0.3);
  }
  
  .contact-button {
      background: #555555;
      color: white !important;
      box-shadow: none;
  }
  
  .cta-button:hover {
      transform: translateY(-2px) scale(1.03);
      box-shadow: 0 6px 20px rgba(229, 9, 20, 0.4);
  }
  
  .contact-button:hover {
      transform: translateY(-2px) scale(1.03);
      background: #333333;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }


  /* Mobile responsiveness */
  @media (max-width: 768px) {
      .show-header { 
          flex-direction: column; 
          text-align: center; 
      }
      .show-logo-container { 
          flex: 0 0 200px; 
      }
      .show-title { 
          font-size: 28px; 
      }
      .show-tagline { 
          font-size: 18px; 
      }
  }
  /* === END DO NOT EDIT SECTION === */
  </style>
  <div style="flex: 1; min-width: 300px;">
    <!-- üîß EDIT: Update show title -->
    <h1 class="show-title" style="margin: 0 0 12px; font-size: 36px; line-height: 1.1; color: #1a1a1a;">{{showTitle}}</h1>


    <!-- üîß EDIT: Update show tagline/description -->
    <p class="show-tagline" style="margin: 0 0 25px; font-size: 20px; color: #555; font-weight: 400; line-height: 1.3;">{{tagline}}</p>


    <!-- üîß EDIT: Update schedule information -->
    <div class="show-schedule" style="margin-bottom: 8px; padding: 8px 12px; border-radius: 6px; font-weight: 600; display: inline-block; background-color: #f1f3f4; color: #5f6368; font-size: 12px; letter-spacing: 0.5px; text-transform: uppercase;">
      {{schedule}}
    </div>


    <!-- üîß EDIT: Update host name(s) -->
    <div style="margin-bottom: 20px; font-size: 14px; color: #666; font-style: italic;">
      Hosted by {{hostedBy}}
    </div>


    <!-- Social Icons -->
    <div style="margin-bottom: 12px;">
      <a href="#" target="_blank" style="margin-right: 10px;">
        <img src="https://cdn.simpleicons.org/x/555555" alt="X (Twitter)" style="width: 20px; height: 20px; vertical-align: middle;">
      </a>
      <a href="#" target="_blank">
        <img src="https://cdn.simpleicons.org/facebook/555555" alt="Facebook" style="width: 20px; height: 20px; vertical-align: middle;">
      </a>
    </div>


    <div style="margin: 0;">
      <a class="cta-button" href="#episodes">üéß Listen &amp; Archive </a>
    </div>
  </div>
</div>
<!-- Divider -->


<div style="height: 1px; background: linear-gradient(90deg, transparent, #e0e0e0, transparent); margin: 40px 0 30px 0;">
  &nbsp;
</div>
<!-- === SHOW OVERVIEW SECTION === -->


<div style="padding: 0 0 40px 0;">
  <h2 style="font-size: 24px; margin-top: 0; margin-bottom: 20px; color: #1a1a1a;">Overview</h2>


  <!-- üîß EDIT: Update show description paragraphs -->
  <p style="font-size: 16px; line-height: 1.6; color: #333333; margin-bottom: 16px;"><strong>{{showTitle}}</strong> {{overview1}}</p>


  <p style="font-size: 16px; line-height: 1.6; color: #333333; margin-bottom: 25px;">{{overview2}}</p>
  
  <!-- üîß EDIT: Update tags below to match show's topics/format/audience -->
  <!-- COLOR-CODED TAGS -->
  <div style="margin-top: 20px; display: flex; flex-wrap: wrap; gap: 8px;">
    {{topicTags}} {{formatTags}} {{audienceTags}}
  </div>
</div>
<!-- Divider -->


<div style="height: 1px; background: linear-gradient(90deg, transparent, #e0e0e0, transparent); margin: 20px 0 30px 0;">
  &nbsp;
</div>
<!-- === HISTORY & LEGACY SECTION === -->
<!-- üóëÔ∏è OPTIONAL: Delete this entire section (including divider below) if show doesn't need history -->
<div style="padding: 0 0 40px 0;">
  <h2 style="font-size: 24px; margin-top: 0; margin-bottom: 20px; color: #1a1a1a;">History &amp; Legacy</h2>


  <!-- üîß EDIT: Update history text -->
  <p style="font-size: 16px; line-height: 1.6; color: #333333; margin-bottom: 16px;">{{history}}</p>
</div>
<!-- Divider -->


<div style="height: 1px; background: linear-gradient(90deg, transparent, #e0e0e0, transparent); margin: 20px 0 30px 0;">
  &nbsp;
</div>
<!-- === HOST BIOS SECTION === -->
<!-- üóëÔ∏è OPTIONAL: Delete this entire section (including divider below) if show doesn't need host bios -->
<div style="padding: 0 0 40px 0;">
  <h2 style="font-size: 24px; margin-top: 0; margin-bottom: 25px; color: #1a1a1a;">Hosts</h2>


  <div class="hosts-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px;">
    <div class="host-bio" style="text-align: center; padding: 15px; border-radius: 8px;">
      <!-- üîß EDIT: Update host image and alt text -->
      <img alt="{{host1Name}}" class="host-image" src="https://placehold.co/280x280/e8f5e8/2e7d32?text=HOST+1+PHOTO" style="width: 100%; aspect-ratio: 1; object-fit: cover; object-position: center; border-radius: 12px; margin-bottom: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);" />
      
      <!-- üîß EDIT: Update host name -->
      <h3 style="margin: 0 0 8px; font-size: 18px; color: #1a1a1a;">{{host1Name}}</h3>


      <!-- üîß EDIT: Update host bio -->
      <p style="margin: 0; font-size: 14px; color: #666; line-height: 1.5;">{{host1Bio}}</p>
    </div>
    
    <div class="host-bio" style="text-align: center; padding: 15px; border-radius: 8px;">
      <!-- üîß EDIT: Update host image and alt text -->
      <img alt="{{host2Name}}" class="host-image" src="https://placehold.co/280x280/f3e5f5/7b1fa2?text=HOST+2+PHOTO" style="width: 100%; aspect-ratio: 1; object-fit: cover; object-position: center; border-radius: 12px; margin-bottom: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);" />
      
      <!-- üîß EDIT: Update host name -->
      <h3 style="margin: 0 0 8px; font-size: 18px; color: #1a1a1a;">{{host2Name}}</h3>


      <!-- üîß EDIT: Update host bio -->
      <p style="margin: 0; font-size: 14px; color: #666; line-height: 1.5;">{{host2Bio}}</p>
    </div>
  </div>
  
  <!-- Contact Host Button -->
  <div style="text-align: center; margin-top: 20px;">
    <button class="contact-button" onclick="goToContactPage()">‚úâÔ∏è Contact Hosts</button>
  </div>
</div>
<!-- Divider -->


<div style="height: 1px; background: linear-gradient(90deg, transparent, #e0e0e0, transparent); margin: 20px 0 30px 0;">
  &nbsp;
</div>
<!-- === EPISODE ARCHIVE EMBED === -->


<!-- üîß EDIT: Update show key to match your show's identifier -->
<div id="show-key" style="display: none;">
  showkey
</div>


<div id="episodes" style="padding: 0 0 40px 0;">
  <h2 style="font-size: 24px; margin-top: 0; margin-bottom: 20px; color: #1a1a1a;">Recent Episodes</h2>
  <!-- DO NOT EDIT: Episode player embed -->
  {{ snippet_html(839) }} <!-- Player content loads here -->
</div>
<!-- Divider -->


<div style="height: 1px; background: linear-gradient(90deg, transparent, #e0e0e0, transparent); margin: 20px 0 30px 0;">
  &nbsp;
</div>
<!-- === DONATE CTA SECTION === -->
<!-- DO NOT EDIT: Keep this section unchanged for all shows -->
<div style="padding: 0 0 20px 0; text-align: center;">
  <h2 style="margin-bottom: 15px; font-size: 24px; color: #1a1a1a;">Support Independent Media</h2>


  <p style="font-size: 16px; color: #333333; margin-bottom: 25px; line-height: 1.6;">{{donationAppeal}}</p>
  <a class="cta-button" href="/donate">Donate Now </a>
</div>
<!--
  =========================
  n8n CODE NODE: FINAL SERVER-SIDE STRING REPLACEMENT SCRIPT
  Place this in an n8n "Code" node (JavaScript) to inject your JSON data into this template.
  Inputs expected:
    - $json["Request Template"]["data"]: The HTML template as a string (this file's contents)
    - $json["Injection"]: The derived data object (see prompt 2)
    - $json["Show Code"]["code"]: Show Key or unique show id
-->
<script id="n8n-final-string-replacement" type="text/javascript">
// Inputs (for n8n server-side Code node)
// const template = $json["Request Template"]["data"];
// const data = $json["Injection"];
// const showKey = $json["Show Code"]["code"];

// Function to build tag blocks
function buildTagSpans(tags, bgColor, textColor) {
  return tags.map(tag =>
    `<span class="tag" style="display:inline-block;background-color:${bgColor};color:${textColor};padding:8px 14px;border-radius:20px;font-size:13px;font-weight:600;cursor:default;">${tag}</span>`
  ).join(' ');
}

// Build tag blocks (example usage)
// const topicTags = buildTagSpans(data.tags.topics, "#e3f2fd", "#1565c0");
// const formatTags = buildTagSpans(data.tags.formats, "#e8f5e8", "#2e7d32");
// const audienceTags = buildTagSpans(data.tags.audiences, "#f3e5f5", "#7b1fa2");

// Start replacements
// let finalHTML = template;
// finalHTML = finalHTML
//   .replace('{{showTitle}}', data.showTitle)
//   .replace('{{tagline}}', data.tagline)
//   .replace('{{schedule}}', data.schedule)
//   .replace('{{hostedBy}}', data.hostedBy)
//   .replace('{{overview1}}', data.overview1)
//   .replace('{{overview2}}', data.overview2)
//   .replace('{{history}}', data.history || '')
//   .replace('{{host1Name}}', data.host1Name)
//   .replace('{{host1Bio}}', data.host1Bio)
//   .replace('{{host2Name}}', data.host2Name || '')
//   .replace('{{host2Bio}}', data.host2Bio || '')
//   .replace('{{donationAppeal}}', data.donationAppeal)
//   .replace('{{showKey}}', showKey)
//   .replace('{{topicTags}}', topicTags)
//   .replace('{{formatTags}}', formatTags)
//   .replace('{{audienceTags}}', audienceTags);

// Remove host 2 block if no second host
// if (!data.hasHost2) {
//   finalHTML = finalHTML.replace(/<div class="host-bio"[\s\S]*?<\/div>\s*<\/div>/, '');
// }

// Remove history section if none
// if (!data.hasHistory) {
//   finalHTML = finalHTML.replace(/<!-- === HISTORY & LEGACY SECTION === -->[\s\S]*?<!-- Divider -->/, '');
// }

// return [{
//   json: {
//     final_html: finalHTML
//   }
// }];
</script>
